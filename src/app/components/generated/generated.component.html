<div
    *ngIf="($data | async) as data"
    [ngSwitch]="data.status"
    content
>
    <ng-template [ngSwitchCase]="status.GENERATED">
        <div
            class="spacer toggle"
            (click)="toggleFit($event)"
        ></div>
        <app-prompt
            *ngIf="prompt"
            [data]="prompt"
        ></app-prompt>
        <div info>
            <div timestamp>{{data.last_modified | amTimeAgo}}</div>
            <button
                mat-icon-button
                (click)="onDownload($event, data.image.raw_src, data.slug)"
            >
                <mat-icon>replay</mat-icon>
            </button>
            <div class="spacer"></div>
            <button
                mat-icon-button
                (click)="onDownload($event, data.image.raw_src, data.slug)"
            >
                <mat-icon>download</mat-icon>
            </button>
            <button
                mat-icon-button
                (click)="onPrompt($event)"
            >
                <mat-icon>data_object</mat-icon>
            </button>
            <button
                mat-icon-button
                *ngIf="mode == modes.GENERATED"
                (click)="onMode($event, modes.SOURCE)"
            >
                <mat-icon>person</mat-icon>
            </button>
            <button
                mat-icon-button
                *ngIf="mode == modes.SOURCE"
                (click)="onMode($event, modes.GENERATED)"
            >
                <mat-icon>image</mat-icon>
            </button>
            <button
                mat-icon-button
                *ngIf="screen == screens.FIT_SCREEN"
                (click)="onScreen($event, screens.FULLSCREEN)"
            >
                <mat-icon>fullscreen</mat-icon>
            </button>
            <button
                mat-icon-button
                *ngIf="screen == screens.FULLSCREEN"
                (click)="onScreen($event, screens.FIT_SCREEN)"
            >
                <mat-icon>fit_screen</mat-icon>
            </button>
        </div>
    </ng-template>
    <ng-template [ngSwitchCase]="status.ERROR">
        <div
            class="spacer"
            (click)="toggleFit($event)"
        ></div>
        <div
            [attr.status]="data.status"
            status-line
        >
            <div label>{{data.status}}</div>
        </div>
        <div class="spacer"></div>
        <div info>
            <div timestamp>{{data.last_modified | amTimeAgo}}</div>
            <div class="spacer"></div>
            <button
                mat-icon-button
                *ngIf="mode == modes.GENERATED"
                (click)="onMode($event, modes.SOURCE)"
            >
                <mat-icon>fit_screen</mat-icon>
            </button>
            <button
                mat-icon-button
                *ngIf="mode == modes.SOURCE"
                (click)="onMode($event, modes.GENERATED)"
            >
                <mat-icon>fullscreen</mat-icon>
            </button>
        </div>
    </ng-template>
    <ng-template [ngSwitchCase]="status.IN_PROGRESS">
        <app-loading [entity]="data">In Progress</app-loading>
    </ng-template>

    <ng-template [ngSwitchDefault]>
        <div
            class="spacer"
            (click)="toggleFit($event)"
        ></div>
        <div
            [attr.status]="data.status"
            status-line
        >
            <div label>{{data.status}}</div>
        </div>
        <div class="spacer"></div>
        <div info>
            <div timestamp>{{data.last_modified | amTimeAgo}}</div>
        </div>
    </ng-template>
</div>
